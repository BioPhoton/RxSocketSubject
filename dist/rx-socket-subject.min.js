(function(){function n(a,c){function f(){1===++e&&(b=new r,k=new r,l=(d.h?d.h(g.n(b.map(function(a){return{type:"sub",value:a}}),k.map(function(a){return{type:"unsub",value:a}}))):g.n(b,k)).map(d.q).b(a))}var d={q:function(a){return JSON.stringify(a)},l:function(a){return JSON.parse(a.data)},h:null,e:null};c&&t(d,c);var b,k,e=0,l;return function(c,p,h){h=h||d.B;return g.create(function(g){f();b.a(c);var w=(d.e?d.e(a):a).map(d.l).filter(h(c)).b(g);return function(){k.a(p);0===--e&&l.dispose();w.dispose()}})}}
function t(a,b){for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);return a}function b(a){function b(){h||(p=q.create(function(a){var b=new Rx.u,c=new Rx.i(b,f.map(function(a){var b,c=null;"string"===typeof a?b=a:a&&a.url&&(b=a.url,c=a.protocol);return x(b,c,y.create(function(a){m=!0;for(d&&d.a(a);0<l.length;)a=l.shift(),e.a(a)}),k)}).b(function(c){b&&!b.m&&b.C(new Rx.i(c.b(function(b){a.a(b)},function(b){g&&g.a(b);m=!1;a.f(b)},function(){m=!1;a.p()}),e.b(c)))},a.f.bind(a)));return function(){m=!1;c&&
!c.m&&c.dispose()}})["finally"](function(){h=!1}).w().A(),h=!0);return p}var f=this.connections=a.connections,d=this.g=a.g,g=this.d=a.d,k=this.c=a.c;a=new u;var e=new u,l=[],m=!1;a.b(function(a){m?e.a(a):l.push(a)},e.f.bind(e),e.p.bind(e));var p,h=!1,n=q.create(function(a){return b().b(a)});v.call(this,a,n)}var g=Rx.j,r=Rx.k,u=Rx.k,q=Rx.j,y=Rx.t,x=Rx.s.v,v=Rx.r;b.prototype=t(Object.create(v.prototype),{constructor:b,o:function(a){return n(this,a)}});b.create=function(a,c,f,d){a instanceof q&&(console.warn("DEPRECATION: RxSocketSubject.create() should be called with a configuration object"),
a={connections:a,g:c,d:f,c:d});return new b(a)};b.o=n;"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:"undefined"!==typeof this&&(this.RxSocketSubject=b)}).call(this);
