(function(){function m(a,l){function c(){1===++e&&(b=new t,h=new t,k=(d.i?d.i(f.s(b.map(function(a){return{type:"sub",value:a}}),h.map(function(a){return{type:"unsub",value:a}}))):f.s(b,h)).map(d.w).b(a))}var d={w:function(a){return JSON.stringify(a)},o:function(a){return JSON.parse(a.data)},i:null,g:null};l&&u(d,l);var b,h,e=0,k;return function(l,n,g){if(!g&&!d.v)throw"no response filter provided";g=g||d.v(l);return f.create(function(f){c();b.a(l);var w=(d.g?d.g(a):a).map(d.o).filter(g).b(f);return function(){h.a(n);
0===--e&&k.dispose();w.dispose()}})}}function u(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(a){function b(){g||(e=new q,n=c.map(function(a){return"string"===typeof a?{url:a,protocol:null}:a}).D(function(a){return r.create(function(b){var c=h?Rx.l.create(function(a){h.a(a)}):void 0,c=x(a.url,a.protocol,y.create(function(a){p=!0;for(d&&d.a(a);0<k.length;)a=k.shift(),e.a(a)}),c);return new Rx.B(c["catch"](function(a){f&&f.a(a);throw a;})["finally"](function(){p=!1}).b(b),
e.b(c))})})["finally"](function(){g=!1}).I().J(),g=!0);return n}var c=this.connections=a.connections,d=this.h=a.h,f=this.f=a.f,h=this.c=a.c;a=new q;var e=new q,k=[],p=!1;a.b(function(a){p?e.a(a):k.push(a)},function(a){e&&e.H(a)},function(){e&&e.G()});var n,g=!1,m=r.create(function(a){return b().b(a)});v.call(this,a,m)}var f=Rx.j,t=Rx.m,q=Rx.m,r=Rx.j,y=Rx.l,x=Rx.C.F,v=Rx.A;b.prototype=u(Object.create(v.prototype),{constructor:b,u:function(a){return m(this,a)}});b.create=function(a,f,c,d){a instanceof
r&&(console.warn("DEPRECATION: RxSocketSubject.create() should be called with a configuration object"),a={connections:a,h:f,f:c,c:d});return new b(a)};b.u=m;"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:"undefined"!==typeof this&&(this.RxSocketSubject=b)}).call(this);
